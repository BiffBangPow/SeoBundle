<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="cmf_seo.metadata.loader.yaml.class">\Symfony\Cmf\Bundle\SeoBundle\Mapping\Driver\Yaml</parameter>
        <parameter key="cmf_seo.metadata.loader.xml.class">\Symfony\Cmf\Bundle\SeoBundle\Mapping\Driver\Xml</parameter>
        <parameter key="cmf_seo.metadata.loader.delegating.class">Symfony\Component\Config\Loader\DelegatingLoader</parameter>
        <parameter key="cmf_seo.metadata.loader.resolver.class">Symfony\Component\Config\Loader\LoaderResolver</parameter>
        <parameter key="cmf_seo.metadata.factory.class">\Symfony\Cmf\Bundle\SeoBundle\Mapping\MetadataFactory</parameter>

        !-- to be removed when caching is implemented -->
        <parameter key="cmf_seo.metadata.metadata.factory.builder.class">\Symfony\Cmf\Bundle\SeoBundle\Mapping\MetadataFactoryBuilder</parameter>
    </parameters>

    <services>

        <!-- Metadata -->
        <service id="cmf_seo.metadata.loader.yaml"
                 class="%cmf_seo.metadata.loader.yaml.class%"
                >
            <argument type="service" id="file_locator" />
        </service>

        <service id="cmf_seo.metadata.loader.xml"
                 class="%cmf_seo.metadata.loader.xml.class%"
                >
            <argument type="service" id="file_locator" />
        </service>

        <service id="cmf_seo.metadata.loader.resolver"
                 class="%cmf_seo.metadata.loader.resolver.class%">
            <argument type="collection">
                <argument type="service" id="cmf_seo.metadata.loader.yaml" />
                <argument type="service" id="cmf_seo.metadata.loader.xml" />
            </argument>
        </service>

        <service id="cmf_seo.metadata.loader.delegating"
                 class="%cmf_seo.metadata.loader.delegating.class%">
            <argument type="service" id="cmf_seo.metadata.loader.resolver" />
        </service>

        <service id="cmf_seo.metadata.factory.builder"
                 class="%cmf_seo.factory.builder.class%">
            <argument type="service" id="cmf_seo.metadata.loader.delegating" />
            <argument>%cmf_seo.metadata.loader.resources%</argument>
        </service>

        <service id="cmf_seo.metadata.factory"
                 class="%cmf_seo.metadata.factory.class%"
                 factory-service="cmf_seo.metadata.factory.builder"
                 factory-method="getMetadataFactory"
                />
    </services>

</container>
